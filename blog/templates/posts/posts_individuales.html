{% extends 'base.html' %}
{% load static %}
{% load colaborador_tags %}
{% block title %}{{ posts.titulo }}{% endblock %}

{% block contenido %}

<div class="container my-5">
    <div class="row justify-content-center bg-white rounded shadow-lg p-4">
        <div class="col-lg-10 col-md-11">
            
            <header class="text-center mb-4 mt-4">
                <h1 class="display-4 fw-bold text-dark">{{ posts.titulo }}</h1>
                <p class="lead text-secondary mb-3">{{ posts.subtitulo }}</p>
                
                <div class="d-flex flex-wrap justify-content-center gap-3 text-muted border-top border-bottom py-2 mb-4">
                    <span class="d-flex align-items-center">

                        Publicado por: <strong class="ms-1 text-dark">{{ posts.autor.username|default:"Autor Desconocido" }}</strong>
                    </span>
                    
                    <span class="d-flex align-items-center">

                        Fecha: {{ posts.publicado|date:"d M Y" }}
                    </span>

                    {% if posts.categoria %}
                        <span class="d-flex align-items-center">
                            Categor√≠a: <strong class="ms-1 text-dark">{{ posts.categoria }}</strong>
                        </span>
                    {% endif %}
                </div>
                </header>

            {% if posts.imagen %}
                <div class="text-center mb-5">
                    <img 
                        src="{{ posts.imagen.url }}" 
                        class="img-fluid rounded shadow-lg" 
                        alt="{{ posts.titulo }}" 
                        style="max-height: 450px; width: 100%; object-fit: cover;"
                    >
                </div>
            {% endif %}

            <section class="post-content mb-5 p-4 ">
                <div class="fs-5 lh-base text-dark text-break"> {{ posts.texto|linebreaks|safe }} 
                </div>
            </section>

            {% if user.is_superuser or request.user|has_group:"Colaborador" %} 
                <div class="d-flex justify-content-end gap-3 mb-5 border-top pt-3">
                    <a href="{% url 'apps.posts:post_update' pk=posts.id %}" class="btn btn-warning shadow">
                        Modificar Post
                    </a>
                    <a href="{% url 'apps.posts:post_delete' pk=posts.pk %}" class="btn btn-outline-danger shadow">
                        Eliminar Post
                    </a>
                </div>
            {% endif %}
            
        </div>
    </div>

    <div class="row justify-content-center" style="margin-top: 40px">
        <div class="col-lg-10 col-md-11">
            {% include 'comentario/crear_comentario.html' %}
        </div>
    </div>
</div>

{% endblock %}